<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Group Randomizer</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: #ffffff;
            font-family: Arial, sans-serif;
            text-align: center; /* Center all content horizontally */
        }
        h1 {
            color: #c9a0dc;
            text-align: center;
        }
        .table-container {
            width: 30%;
            margin: 20px;
            display: inline-block; /* Change from float to inline-block */
            vertical-align: top; /* Align the tables at the top */
        }
        table {
            width: 100%;
            background-color: #2e2e2e;
            border-collapse: collapse;
            margin-bottom: 10px;
        }
        th, td {
            border: 1px solid #444444;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #3e3e3e;
            color: #c9a0dc;
        }
        textarea {
            width: calc(100% - 12px);
            background-color: #3e3e3e;
            border: 1px solid #555555;
            color: #ffffff;
            padding: 5px;
            margin-top: 5px;
            resize: vertical;
        }
        button {
            background-color: #c9a0dc;
            border: none;
            color: #1e1e1e;
            padding: 8px 16px;
            margin-top: 5px;
            cursor: pointer;
        }
        .button-full-width {
            width: 100%;
        }
        #group-container {
            width: 80%;
            margin: 30px auto 20px;
            text-align: center;
        }
        #groupTable {
            width: 100%;
            background-color: #2e2e2e;
            margin-bottom: 10px;
            margin-left: auto;
            margin-right: auto;
        }
        #copyButton {
            background-color: #c9a0dc;
            border: none;
            color: #1e1e1e;
            padding: 8px 16px;
            cursor: pointer;
            width: 100%; /* Make button the same width as the table */
        }
        /* Remove the .center class since we're centering via body */
    </style>
</head>
<body>
    <h1>Group Randomizer</h1>

    <!-- Row containing the three role sections -->
    <div>
        <!-- Tank Section -->
        <div class="table-container">
            <table id="tankTable">
                <thead>
                    <tr><th>Tank</th></tr>
                </thead>
                <tbody></tbody>
            </table>
            <textarea id="tankInput" placeholder="Paste Tank Names (one per line)" rows="5"></textarea>
            <button class="button-full-width" onclick="addPlayers('tank')">Add Tanks</button>
        </div>

        <!-- DPS Section -->
        <div class="table-container">
            <table id="dpsTable">
                <thead>
                    <tr><th>DPS</th></tr>
                </thead>
                <tbody></tbody>
            </table>
            <textarea id="dpsInput" placeholder="Paste DPS Names (one per line)" rows="5"></textarea>
            <button class="button-full-width" onclick="addPlayers('dps')">Add DPS</button>
        </div>

        <!-- Healer Section -->
        <div class="table-container">
            <table id="healerTable">
                <thead>
                    <tr><th>Healer</th></tr>
                </thead>
                <tbody></tbody>
            </table>
            <textarea id="healerInput" placeholder="Paste Healer Names (one per line)" rows="5"></textarea>
            <button class="button-full-width" onclick="addPlayers('healer')">Add Healers</button>
        </div>
    </div>

    <!-- Generate Group Button -->
    <div>
        <button onclick="generateGroup()">Generate Group</button>
    </div>

    <!-- Group Table and Copy Button -->
    <div id="group-container">
        <table id="groupTable">
            <thead>
                <tr>
                    <th>Tank</th>
                    <th>DPS 1</th>
                    <th>DPS 2</th>
                    <th>DPS 3</th>
                    <th>Healer</th>
                </tr>
            </thead>
            <tbody>
                <tr id="groupRow">
                    <td class="center">-</td>
                    <td class="center">-</td>
                    <td class="center">-</td>
                    <td class="center">-</td>
                    <td class="center">-</td>
                </tr>
            </tbody>
        </table>
        <button id="copyButton" onclick="copyGroup()" disabled>Copy Group</button>
    </div>

    <script>
        // Arrays to hold player names
        var tanks = [];
        var dpsList = [];
        var healers = [];

        // Function to add multiple player names to the respective tables and arrays
        function addPlayers(role) {
            var inputId = role + 'Input';
            var tableId = role + 'Table';
            var playerNames = document.getElementById(inputId).value.trim();

            if (playerNames !== '') {
                var namesArray = playerNames.split('\n');
                var tableBody = document.getElementById(tableId).getElementsByTagName('tbody')[0];

                namesArray.forEach(function(playerName) {
                    playerName = playerName.trim();
                    if (playerName !== '') {
                        var newRow = tableBody.insertRow();
                        var newCell = newRow.insertCell(0);
                        newCell.textContent = playerName;

                        // Add to the respective array
                        if (role === 'tank') {
                            tanks.push(playerName);
                        } else if (role === 'dps') {
                            dpsList.push(playerName);
                        } else if (role === 'healer') {
                            healers.push(playerName);
                        }
                    }
                });

                // Clear the textarea
                document.getElementById(inputId).value = '';
            }
        }

        // Function to generate a random group
        function generateGroup() {
            if (tanks.length < 1 || dpsList.length < 3 || healers.length < 1) {
                alert('Not enough players to generate a group.');
                return;
            }

            // Randomly select players
            var selectedTank = tanks[Math.floor(Math.random() * tanks.length)];
            var selectedHealer = healers[Math.floor(Math.random() * healers.length)];

            // Randomly select 3 unique DPS players
            var shuffledDPS = dpsList.slice().sort(() => 0.5 - Math.random());
            var selectedDPS = shuffledDPS.slice(0, 3);

            // Display the selected group
            var groupRow = document.getElementById('groupRow');
            groupRow.cells[0].textContent = selectedTank;
            groupRow.cells[1].textContent = selectedDPS[0];
            groupRow.cells[2].textContent = selectedDPS[1];
            groupRow.cells[3].textContent = selectedDPS[2];
            groupRow.cells[4].textContent = selectedHealer;

            // Enable the copy button
            document.getElementById('copyButton').disabled = false;
        }

        // Function to copy the group names to clipboard
        function copyGroup() {
            var groupRow = document.getElementById('groupRow');
            var groupNames = [];

            // Collect the names from the groupRow cells
            for (var i = 0; i < groupRow.cells.length; i++) {
                var name = groupRow.cells[i].textContent;
                if (name && name !== '-') {
                    groupNames.push(name);
                }
            }

            // Join the names with tabs to match spreadsheet cells
            var clipboardText = groupNames.join('\t');

            // Create a temporary textarea to hold the text
            var tempTextarea = document.createElement('textarea');
            tempTextarea.value = clipboardText;
            document.body.appendChild(tempTextarea);

            // Select and copy the text
            tempTextarea.select();
            tempTextarea.setSelectionRange(0, 99999); // For mobile devices
            document.execCommand('copy');

            // Remove the temporary textarea
            document.body.removeChild(tempTextarea);

            alert('Group copied to clipboard!');
        }
    </script>
</body>
</html>
